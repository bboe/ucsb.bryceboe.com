<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/public/variant-multi.css" title="Variant Multi" media="all" />
    <link rel="stylesheet" type="text/css" href="/public/monokai.sublime.css" />
    <link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=" rel="icon" type="image/x-icon" />
    <title>Lab 8 &raquo; CS24 Summer 2013</title>
  </head>
  <body>
    <div id="container980">
<div id="header">
  <h1><a href="/cs24_m13/">Computer Science 24, Summer 2013</a></h1>
  <h2>Problem Solving with Computers II</h2>
</div>

<div id="menu">
  <ul>
    <li><a href="/cs24_m13/schedule">lecture schedule</a></li>
    <li><a href="/cs24_m13/submission">submission instructions</a></li>
  </ul>
</div>

<div id="main">
  <div id="sidebar">
    <div class="sidebarbox">
      <h2>People &amp; Office Hours</h2>
      <ul>
        <li><strong>Instructor</strong>: Bryce Boe
          (<a href="/">web</a>, <a href="mailto:bboe@cs.ucsb.edu">email</a>)
          <ul>
            <li>Tuesday, 14:15 - 15:15 in GSL</li>
            <li>Thursday, 11:15 - 12:15 in GSL</li>
          </ul>
        </li>
        <li><strong>TA</strong>: Jane Iedemska
          (<a href="mailto:jane@iedemska.com">email</a>)
          <ul>
            <li>Wednesday, 11:30 - 12:30 in Phelps 1413</li>
            <li>Thursday, 14:30 - 15:30 in Phelps 1413</li>
          </ul>
        </li>
      </ul>
    </div>

    <div class="sidebarbox">
      <h2>Deadlines</h2>
      <h3>All deadlines are at 23:59:59 on the due date.</h3>
      <ul>
        <li>2013/06/25 -- <a href="/cs24_m13/hw1">Homework 1</a></li>
        <li>2013/06/26 -- <a href="/cs24_m13/lab1">Lab 1</a></li>
        <li>2013/06/28 -- Course Drop with Refund</li>
        <li>2013/07/03 -- <a href="/cs24_m13/lab2">Lab 2</a></li>
        <li>2013/07/10 -- <a href="/cs24_m13/lab3">Lab 3</a></li>
        <li>2013/07/16 -- <a href="/cs24_m13/proj1">Project 1</a></li>
        <li>2013/07/17 -- <a href="/cs24_m13/lab4">Lab 4</a></li>
        <li>2013/08/01 -- <a href="/cs24_m13/lab5">Lab 5</a></li>
        <li>2013/08/07 -- <a href="/cs24_m13/lab6">Lab 6</a></li>
        <li>2013/08/10 -- <a href="/cs24_m13/proj2">Project 2 (Part 1)</a></li>
        <li>2013/08/14 -- <a href="/cs24_m13/lab7">Lab 7</a></li>
        <li>2013/08/17 -- <a href="/cs24_m13/proj2#part-2">Project 2 (Part 2)</a></li>
        <li>2013/08/21 -- <a href="/cs24_m13/lab8">Lab 8</a></li>
        <li>2013/08/30 -- <a href="/cs24_m13/proj3">Project 3</a></li>
      </ul>
    </div>
  </div>

  <div id="content">
<h2 id="lab-8-word-frequency-counter">Lab 8: Word Frequency Counter</h2>

<h3 id="goals-for-this-lab">Goals for this lab</h3>

<p>By the time you have completed this lab, you should:</p>

<ul>
  <li>know what a hash table is</li>
  <li>learn about the C++ standard template library (STL)</li>
  <li>have more experience working with strings in C++</li>
</ul>

<h3 id="lab-preparation">Lab preparation</h3>

<p>After logging in, create the directory for this lab:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> cs24/lab8
</code></pre></div></div>

<p>Change into the lab2 directory and copy the files you will need for this lab:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>cs24/lab8
<span class="nb">cp</span> ~bboe/public_html/cs24_m13/code/lab8/<span class="k">*</span> <span class="nb">.</span>
</code></pre></div></div>

<p>Open up README.txt with your favorite text editor and be sure to add your and
your partner’s name so that you both receive credit.</p>

<h3 id="hash-table">Hash Table</h3>

<h4 id="definition">Definition</h4>

<p>Hash table are one of the basic data structures. It is a mapping between a
unique key and its value, that is usually stored in the form of a table (or
array).  To get the value by knowing the key we will use a hash function. A
hash function tells us where in the array a value for the given key is stored.
It calculates the (in theory unique) index in the array from the key.</p>

<p>For example, we have a small hash table to identify if the number is odd or
even.  It will have two records in its array:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0 Even
1 Odd
</code></pre></div></div>

<p>Now we provide hash function as <code class="language-plaintext highlighter-rouge">mod 2</code> and a number (key) <code class="language-plaintext highlighter-rouge">num</code>, that we want
to check.  We calculate index <code class="language-plaintext highlighter-rouge">i = num % 2</code> and look for an answer (value) at
<code class="language-plaintext highlighter-rouge">array[i]</code>.  If <code class="language-plaintext highlighter-rouge">num = 10</code> then <code class="language-plaintext highlighter-rouge">i = 10 % 2 = 0</code> and <code class="language-plaintext highlighter-rouge">array[0] = "Even"</code>. If
<code class="language-plaintext highlighter-rouge">num = 11</code> then <code class="language-plaintext highlighter-rouge">i = 11 % 2 = 1</code> and <code class="language-plaintext highlighter-rouge">array[1] = "Odd"</code>.</p>

<p>We can also use hash tables to count the number of odds and evens in some given
sequence.</p>

<p>Now our table array has two recores:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0 Number of evens
1 Number of odds
</code></pre></div></div>

<p>If we are encountering an even or an odd at some point in the code, we can
simply increase corresponding number in the table via <code class="language-plaintext highlighter-rouge">array[num % 2]++;</code></p>

<p>In this case our key, that is some number, maps to a value that is a number of
the occurences of the same type numbers.</p>

<p>Tomorrow in class we will discuss implementation details of hash
tables. However, for today’s lab you will just need to use an existing hash
table. Hash tables in general can store many more than 2 items, in fact they
can store an unbounded number of items with the right implementation.</p>

<h3 id="standard-template-library">Standard Template Library</h3>

<p>In the previous labs we have talked about C++ templates. Turns out there is a
library with a bunch of very useful templates that are ready to use.</p>

<h4 id="vector">vector</h4>

<p>One template is the <code class="language-plaintext highlighter-rouge">vector</code> template that allows you to create a dynamic array
of an arbitrary type and provides methods for dynamic memory allocation.  Here
is an example of code that creates a string array and adds</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">nums</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>  <span class="c1">// create array of 3 ints, initialize to 5s</span>
                             <span class="c1">// nums = [5, 5, 5]</span>
    <span class="n">nums</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>       <span class="c1">// add 6 in the end</span>
                             <span class="c1">// nums = [5, 5, 5, 6]</span>
    <span class="n">nums</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>         <span class="c1">// remove the last element</span>
                             <span class="c1">// nums = [5, 5, 5]</span>
    <span class="k">for</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">i</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// prints out the content of the nums</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As a template is a container built to use with an arbitrary type, it makes
sence to implement a special type of pointers, that would work with
containers. These are called iterators. In the example above, to iterate
through a vector of integers we declare (right in the middle of the code)
<code class="language-plaintext highlighter-rouge">vector&lt;int&gt;::iterator i</code>. We say that we start from the first element <code class="language-plaintext highlighter-rouge">i =
vector.begin()</code> and we print numbers until <code class="language-plaintext highlighter-rouge">i</code> is pointing to the “end”
element, which is one after the last in the vector <code class="language-plaintext highlighter-rouge">i != nums.end()</code>.
Iterators have very similar arithmetics to pointers. <code class="language-plaintext highlighter-rouge">i++</code> will move iterator
to one position forward, <code class="language-plaintext highlighter-rouge">nums.begin() + 4</code> will be pointing to the element at
position nums[4] and <code class="language-plaintext highlighter-rouge">*i</code> will return a value that is stored at a current
position.</p>

<h4 id="string">string</h4>

<p>Another example are strings. Strings are containers specificaly to store
strings and provide a number of popular methods.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Assume the standard input stream contains "abc qwe\n345\n"</span>
    <span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">s1</span><span class="p">;</span>  <span class="c1">// "abc"</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">s2</span><span class="p">;</span>  <span class="c1">// "qwe"</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">s3</span><span class="p">;</span>  <span class="c1">// "345"</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">s1</span> <span class="o">+</span> <span class="n">s2</span> <span class="o">+</span> <span class="n">s3</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">s1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// abcqwe345</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="unordered_map-hash-table">unordered_map (hash table)</h4>

<p>One more example is <code class="language-plaintext highlighter-rouge">unordered_map</code>, that is an implementation of a hash table
mapping key to value.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unordered_map&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">key</span><span class="p">(</span><span class="s">"abc"</span><span class="p">);</span>
    <span class="n">unsorted_map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">hash_table</span><span class="p">;</span>  <span class="c1">// initialize the hash table</span>

    <span class="c1">// test if a key is contained in the hash table</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">hash_table</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">!=</span> <span class="n">hash_table</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// 0</span>

    <span class="c1">// Accessing an item that was not previously contained will add it</span>
    <span class="c1">// using the default constructor (initialize to 0 for type int)</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">hash_table</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// 0</span>

    <span class="c1">// test if a key is contained in the hash table</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">hash_table</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">!=</span> <span class="n">hash_table</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// 1</span>

    <span class="n">hash_table</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>  <span class="c1">// Increment the key</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">hash_table</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// 1</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If we want to iterate trough the table, then we have to create appropriate
iterator <code class="language-plaintext highlighter-rouge">unordered_map&lt;string, int&gt;::iterator it = hash_table.begin();</code></p>

<p>Each element returned by the hash table iterator is of type <code class="language-plaintext highlighter-rouge">pair</code> that
contains two attributes: <code class="language-plaintext highlighter-rouge">first</code>, the key; and <code class="language-plaintext highlighter-rouge">second</code>, the value.  To refer
separately to the key try <code class="language-plaintext highlighter-rouge">it-&gt;first</code>, for the value try <code class="language-plaintext highlighter-rouge">it-&gt;second</code>.</p>

<p><strong>NOTE</strong>: The <code class="language-plaintext highlighter-rouge">unordered_map</code> class does not exist in older versions of
C++. Thus in order to compile this program (and your lab8 program) you will
need to add <code class="language-plaintext highlighter-rouge">-std=c++11</code> to the clang compile line.</p>

<h4 id="sort">sort</h4>

<p>Finally, there is a numper of popular algorithms, implemented in STL. For
example, in this lab we will be using <code class="language-plaintext highlighter-rouge">sort</code>. Sort will sort elements in
ascending order, unless provided a sorting function that specifies how we
compare two elements.</p>

<p>For example, if we wanted to output the elements of our hash table in reverse
(descending) order based on the key we would do the following:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;unordered_map&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">bool</span> <span class="nf">sort_reverse</span><span class="p">(</span><span class="k">const</span> <span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">first</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(){</span>
  <span class="c1">// Initialize the hash table with some fun values</span>
  <span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">ht</span> <span class="o">=</span> <span class="p">{{</span><span class="s">"Bananas"</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="s">"Apples"</span><span class="p">,</span> <span class="mi">16</span><span class="p">},</span>
                                   <span class="p">{</span><span class="s">"Pears"</span><span class="p">,</span> <span class="mi">8</span><span class="p">},</span> <span class="p">{</span><span class="s">"Zebras"</span><span class="p">,</span> <span class="mi">1</span><span class="p">}};</span>

  <span class="c1">// unorderd_map iterators cannot be sorted so we must copy its contents</span>
  <span class="c1">// into a vector</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">values</span><span class="p">(</span><span class="n">ht</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">ht</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
  <span class="c1">// sort all of the values in the vector using the function `reverse` for</span>
  <span class="c1">// comparisons</span>
  <span class="n">sort</span><span class="p">(</span><span class="n">values</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">values</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">sort_reverse</span><span class="p">);</span>

  <span class="c1">// Output the items</span>
  <span class="c1">// The `auto` keyword in C++11 will automatically determine its type.</span>
  <span class="c1">// In this case its type is: vector&lt;pair&lt;string, int&gt; &gt;::iterator</span>
  <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">values</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="writing-frequencycpp">Writing frequency.cpp</h3>

<p>In this lab you will be writing a program that calculates number of ocurrences
of words in a standard input. It should print out statistics on the encountered
words. The order of the output should be such that the most frequently used
words are listed first, and words of the same frequency are sorted
alphanumerically.</p>

<p>Words can include punctuation and are separated by any form of
whitespace. Using <code class="language-plaintext highlighter-rouge">cin &gt;&gt; term</code> where term is a string will handle the
whitespace issue for you. All comparisons should be case insensitive, meaning
that <code class="language-plaintext highlighter-rouge">IS</code>, <code class="language-plaintext highlighter-rouge">Is</code>, <code class="language-plaintext highlighter-rouge">iS</code>, and <code class="language-plaintext highlighter-rouge">is</code> should all be counted as one word, <code class="language-plaintext highlighter-rouge">is</code>. You
will need to write a function that converts a string to its lowercase form. You
probably want to use the <code class="language-plaintext highlighter-rouge">tolower</code> function to help you with that.</p>

<p>For example <code class="language-plaintext highlighter-rouge">echo "ASD aSd asd sdf dfg." | ./a.out</code> should produce the output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3 asd
1 dfg.
1 sdf
</code></pre></div></div>

<h3 id="submitting-the-project">Submitting the project</h3>

<p>Only one person in a group need submit the project. If both members of a group
submit we will only score the last submission made between the two group
members. Please review the
<a href="/cs24_m13/submission">submission instructions</a> as needed. On the submission site
you will find the command you need to use to submit the project. Note that you
may resubmit this project as many times as necessary up until the deadline.</p>

  </div>
  <div class="clear">&nbsp;</div>
</div>

      <div id="credits">
        <p><span class="small">Template design by <a href="https://andreasviklund.com/">Andreas Viklund</a></span></p>
      </div>
    </div>
  </body>
</html>
