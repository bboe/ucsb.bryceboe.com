<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/public/variant-multi.css" title="Variant Multi" media="all" />
    <link rel="stylesheet" type="text/css" href="/public/monokai.sublime.css" />
    <link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=" rel="icon" type="image/x-icon" />
    <title>Lab 1 &raquo; CS32 Summer 2012</title>
  </head>
  <body>
    <div id="container980">
<div id="header">
  <h1><a href="/cs32_m12/">Computer Science 32, Summer 2012</a></h1>
  <h2>Object-Oriented Design and Implementation</h2>
</div>

<div id="menu">
  <ul>
    <li><a href="/cs32_m12/schedule">lecture schedule</a></li>
    <li><a href="/cs32_m12/automated_feedback">automated feedback</a></li>
    <li><a href="/cs32_m12/bourne">bourne shell scripting</a></li>
  </ul>
</div>

<div id="main">
  <div id="sidebar">
    <div class="sidebarbox">
      <h2>People &amp; Office Hours</h2>
      <ul>
        <li><strong>Instructor</strong>: Bryce Boe
          (<a href="/">web</a>, <a href="mailto:bboe@cs.ucsb.edu">email</a>)
          <ul>
            <li>Monday, 14:15 - 15:15 in GSL</li>
            <li>Wednesday, 11:15 - 12:15 in GSL</li>
          </ul>
        </li>
        <li><strong>TA</strong>: Saeed Mahani
          <ul>
            <li>Tuesday, 14:00 - 15:00 in CSIL</li>
            <li>Thursday, 13:00 - 14:00 in CSIL</li>
          </ul>
        </li>
      </ul>
    </div>

    <div class="sidebarbox">
      <h2>Tentative Deadlines</h2>
      <h3>All deadlines are at 23:59:59 on the due date.</h3>
      <ul>
        <li>2012/08/06 -- <a href="/cs32_m12/hw1">Homework 1</a></li>
        <li>2012/08/09 -- <a href="/cs32_m12/lab1">Lab 1</a></li>
        <li>2012/08/10 -- Drop with Refund</li>
        <li>2012/08/12 -- <a href="/cs32_m12/hw2">Homework 2</a></li>
        <li>2012/08/16 -- <a href="/cs32_m12/lab2">Lab 2</a></li>
        <li>2012/08/19 -- <a href="/cs32_m12/project1_part1">Project 1, Part 1</a></li>
        <li>2012/08/23 -- <a href="/cs32_m12/lab3">Lab 3</a></li>
        <li>2012/08/26 -- <a href="/cs32_m12/project1_part2">Project 1, Part 2</a></li>
        <li>2012/08/30 -- <a href="/cs32_m12/lab4">Lab 4</a></li>
        <li>2012/09/06 -- <a href="/cs32_m12/lab5">Lab 5</a></li>
        <li>2012/09/13 -- <a href="/cs32_m12/project2">Project 2</a></li>
      </ul>
    </div>
  </div>

  <div id="content">
<h2 id="lab-1-linux-programs-and-shell-scripting">Lab 1, Linux programs and Shell scripting</h2>

<p>In this lab you will write a bourne shell script that computes the average
number of lines contained by files in a given directory.</p>

<h3 id="lab-preparation">Lab Preparation</h3>

<p>Before you begin, let’s prepare your cs32 directory in your home directory if
you don’t already have one. Note that these instructions assume you are using
either a CSIL machine or one of the lab machines:</p>

<p>Create the directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir cs32
</code></pre></div></div>

<p>Change the permissions such that only your account can access the files inside
this directory. This step is incredibly important. If omitted, other students
can peek at your work and you may be held partially responsible.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod 700 cs32
</code></pre></div></div>

<p>Change into the cs32 directory, and create a lab1 directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd cs32
mkdir lab1
</code></pre></div></div>

<p>Note that you do not need to change the permissions of the lab1 directory or
any files inside of cs32 because permissions cascade. If you wanted to lock
down your entire account you could run <code class="language-plaintext highlighter-rouge">chmod 700 ~</code>; however, no one would be
able to access your website if that were the case.</p>

<p>Change into the lab1 directory and create the empty files you will need for
this lab:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd lab1
touch README line_average.sh
</code></pre></div></div>

<h3 id="exploring-a-few-linux-programs">Exploring a few linux programs</h3>

<p>Below is a list of linux programs you will need to use to complete this
lab:</p>

<ul>
  <li>cut</li>
  <li>echo</li>
  <li>expr</li>
  <li>ls</li>
  <li>wc</li>
</ul>

<p>For each program, do the following:</p>

<ol>
  <li>Use the <code class="language-plaintext highlighter-rouge">man</code> program to look up what each does: <code class="language-plaintext highlighter-rouge">man PROG</code></li>
  <li>In the README, indicate the program name by providing an example invocation
of the program such as <code class="language-plaintext highlighter-rouge">man ls</code>. Additionally, describe what that invocation
of the program should produce assuming it runs successfully.</li>
</ol>

<p>Example README for other programs:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir blah
 - Will create the directory blah in the current working directory if blah
   does not already exist.

touch foo bar
- Will update both the access and modification times of the files foo and
  bar. Will create a zero byte version of the files if they do not already
  exist.
</code></pre></div></div>

<h3 id="bourne-shell-scripting-line_averagesh">Bourne shell scripting: line_average.sh</h3>

<p>To review the bourne shell scripting concepts that you will need to complete
this lab, please see the <a href="/cs32_m12/bourne">introduction to bourne shell scripting</a>.</p>

<p>In this part of the lab, you will write a bourne shell script that computes the
average number of lines for all the regular files in a given directory.</p>

<p>For testing and demonstration purposes, the following commands are how I
created a simple test directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir tests
echo -e "foo\nbar\nbaz" &gt; tests/file1
touch tests/zero
</code></pre></div></div>

<p>Running <code class="language-plaintext highlighter-rouge">ls -l</code> on the tests directory should produce a similar output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>total 4
-rw-r--r-- 1 bboe grad 12 Aug  8 22:55 file1
-rw-r--r-- 1 bboe grad  0 Aug  8 22:55 zero
</code></pre></div></div>

<p>Conceptually, <code class="language-plaintext highlighter-rouge">file1</code> has 3 lines, and <code class="language-plaintext highlighter-rouge">zero</code> has zero lines. You can confirm
that using <code class="language-plaintext highlighter-rouge">wc</code>. Thus the shell script you will write should confirm that the
average is 1 (using integer division is required).</p>

<p>Execution via <code class="language-plaintext highlighter-rouge">./line_average.sh tests</code> should produce the following output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># files: 2
avg lines: 1
</code></pre></div></div>

<h4 id="error-checking">Error checking</h4>

<p>Your script should output the following error message verbatim if the number
of command line arguments is not 1:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Usage line_average.sh DIRECTORY
</code></pre></div></div>

<p>If the provided argument <code class="language-plaintext highlighter-rouge">DIRECTORY</code> is not actually a directory, your script
should output the following error message verbatim:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{DIRECTORY} is not a directory
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">{DIRECTORY}</code> part of the error message should be replaced with whatever
the user input as the first argument. Here is an example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./line_average.sh nope
nope is not a directory
</code></pre></div></div>

<h4 id="successful-output">Successful output</h4>

<p>Your program should iterate through the list of regular files contained in
DIRECTORY and produce an output containing the number of regular files and the
average number of lines contained within those regular files, if any.</p>

<p>For instance, if there are no regular files in DIRECTORY, then the output
should be exactly:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># files: 0
</code></pre></div></div>

<p>If there is a single regular file with 5 lines in DIRECTORY, then the output
should be exactly:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># files: 1
avg lines: 5
</code></pre></div></div>

<h4 id="hints">Hints</h4>

<ol>
  <li>At some point you should need to extract a portion of a process’s
output. Look carefully through the man pages for the programs referenced
earlier in the lab on how to do this. Make sure your solution doesn’t depend
on numbers being in the same column location.</li>
  <li>You also will need to perform some basic math. This isn’t trivial in shell
scripts as it relies on external programs. Again, I suggest looking through
the previously referenced programs.</li>
</ol>

<h3 id="submission-instructions">Submission Instructions</h3>

<p>Please make only one submission per pair; this isn’t essential, it just makes
life easier for the TA. In either case, ensure the TA has recorded with whom
you are working. For your comfort, you may include both of your names in the
README file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~cs32/submit lab1@cs32 README line_average.sh
</code></pre></div></div>

<p>You may submit up to 20 times. Please check the feedback email to ensure you
submitted correctly, and are satisfied with your final score. If you are not,
feel free to revise and submit again.</p>

  </div>
  <div class="clear">&nbsp;</div>
</div>

      <div id="credits">
        <p><span class="small">Template design by <a href="https://andreasviklund.com/">Andreas Viklund</a></span></p>
      </div>
    </div>
  </body>
</html>
